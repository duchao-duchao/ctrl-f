!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self)["ctrl-f"]=t()}(this,(function(){"use strict";return new class{constructor(e={}){this.options={backgroundColor:"#fff",textColor:"#000",highlightColor:"yellow",searchBoxWidth:"300px",...e},this.createSearchBox(),this.listenForSearch(),this.clearHighlights()}createSearchBox(){if(this.searchBox)return;this.searchBox=document.createElement("div"),this.searchBox.style.position="fixed",this.searchBox.style.top="10px",this.searchBox.style.right="10px",this.searchBox.style.padding="10px",this.searchBox.style.backgroundColor=this.options.backgroundColor,this.searchBox.style.color=this.options.textColor,this.searchBox.style.boxShadow="0 2px 10px rgba(0, 0, 0, 0.1)",this.searchBox.style.zIndex="9999",this.searchBox.style.cursor="move";const e=document.createElement("input");e.type="text",e.placeholder="Search...",e.style.width=this.options.searchBoxWidth,e.style.padding="5px";const t=document.createElement("button");t.textContent="Close",t.style.marginLeft="10px",t.style.padding="5px",t.addEventListener("click",(()=>{this.closeSearchBox(),this.clearHighlights()})),this.searchBox.appendChild(e),this.searchBox.appendChild(t),document.body.appendChild(this.searchBox),e.addEventListener("input",(e=>{this.searchText(e.target.value)})),this.makeDraggable(this.searchBox)}closeSearchBox(){this.searchBox&&(document.body.removeChild(this.searchBox),this.searchBox=null)}clearHighlights(){document.querySelectorAll(".highlighted").forEach((e=>{const t=e.parentNode,o=document.createTextNode(e.textContent);t.replaceChild(o,e)}))}searchText(e){if(this.clearHighlights(),!e.trim())return;const t=new RegExp(e,"gi");this.getTextNodesUnder(document.body).forEach((o=>{const s=o.textContent.match(t);s&&this.highlightText(o,s,e)}))}getTextNodesUnder(e){const t=[],o=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1);let s;for(;s=o.nextNode();)t.push(s);return t}highlightText(e,t,o){const s=new RegExp(`(${o})`,"gi"),i=e.textContent.split(s),n=e.parentNode,h=document.createDocumentFragment();i.forEach((e=>{if(e.toLowerCase()===o.toLowerCase()){const t=document.createElement("span");t.style.backgroundColor=this.options.highlightColor,t.style.fontWeight="bold",t.className="highlighted",t.textContent=e,h.appendChild(t)}else h.appendChild(document.createTextNode(e))})),n.replaceChild(h,e)}listenForSearch(){window.addEventListener("keydown",(e=>{e.ctrlKey&&"f"===e.key&&(e.preventDefault(),this.createSearchBox())}))}makeDraggable(e){let t,o,s=!1;e.addEventListener("mousedown",(i=>{s=!0,t=i.clientX-e.getBoundingClientRect().left,o=i.clientY-e.getBoundingClientRect().top})),window.addEventListener("mousemove",(i=>{s&&(e.style.top=i.clientY-o+"px",e.style.left=i.clientX-t+"px")})),window.addEventListener("mouseup",(()=>{s=!1}))}}}));
